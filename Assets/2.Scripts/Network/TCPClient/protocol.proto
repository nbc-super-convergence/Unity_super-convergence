syntax = "proto3";

message Vector {
    float x = 1; 
    float y = 2; 
    float z = 3; 
}

enum State {
    IDLE = 0;
    MOVE = 1;
    DIE = 2;
}

message C2S_IceJoinRequest {
    int32 playerId = 1; //필요할까요..? 불필요하다면 저희도 굳이 안보내겠습니당
}

message S2C_IcePlayerSpawnNotification {
    int32 playerId = 1;
    Vector position = 2; //스폰 Position
    float rotation = 3; //스폰 시 회전 방향
    int32 playerType = 4; //p1~p4
}

message C2S_IcePlayerMoveRequest {
    int32 playerId = 1; 
    Vector position = 2; //위치 : 유효성 검증.
    float rotation = 3; //플레이어가 바라보는 방향 : rot y값.
    Vector vector = 4; //움직이는 방향 + 힘.
    State state = 5;  //애니메이션 종류.
}

message S2C_IcePlayerMoveNotification {
    int32 playerId = 1; 
    Vector position = 2; //위치 : 유효성 검증.
    float rotation = 3; //플레이어가 바라보는 방향 : rot y값.
    Vector vector = 4; //움직이는 방향 + 힘.
    State state = 5;  //애니메이션 종류.
}

message GamePacket {
    oneof payload {
        C2S_IceJoinRequest iceJoinRequest = 101;
        S2C_IcePlayerSpawnNotification icePlayerSpawnNotification = 102;
        C2S_IcePlayerMoveRequest icePlayerMoveRequest = 103; 
        S2C_IcePlayerMoveNotification icePlayerMoveNotification = 104;
    }
}